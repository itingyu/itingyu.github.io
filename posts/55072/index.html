<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width">
<meta name="theme-color" content="#222">

  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png">

<link rel="stylesheet" href="/css/main.css">

<link rel="stylesheet" href="https://fonts.lug.ustc.edu.cn/css?family=Noto+Serif+SC:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext">

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" integrity="sha256-HtsXJanqjKTc8vVQjO4YMhiqFoXkfBsjBWcX91T1jr8=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.1.1/animate.min.css" integrity="sha256-PR7ttpcvz8qrF57fur/yAx1qXMFJeJFiA6pSzWi0OIE=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.css" integrity="sha256-Vzbj7sDDS/woiFS3uNKo8eIuni59rjyNGtXfstRzStA=" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/themes/blue/pace-theme-center-simple.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/pace/1.2.4/pace.min.js" integrity="sha256-gqd7YTjg/BtfqWSwsJOvndl0Bxc8gFImLEkXQT8+qj0=" crossorigin="anonymous"></script>

<script class="next-config" data-name="main" type="application/json">{"hostname":"itingyu.github.io","root":"/","images":"/images","scheme":"Gemini","darkmode":false,"version":"8.17.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12,"onmobile":true},"copycode":{"enable":true,"style":null},"bookmark":{"enable":false,"color":"#222","save":"auto"},"mediumzoom":false,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":"gitalk","storage":true,"lazyload":false,"nav":{"gitalk":{"order":-1}},"activeClass":"gitalk"},"stickytabs":false,"motion":{"enable":true,"async":false,"transition":{"menu_item":"fadeInDown","post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}}</script><script src="/js/config.js"></script>

    <meta name="description" content="https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;362984115 Spring Boot基础概念： 约定优于配置，简单来说就是你所期待的配置与约定的配置一致，那么就可以不做任何配置，约定不符合期待时才需要对约定进行替换配置。 特征： \1. SpringBoot Starter：他将常用的依赖分组进行了整合，将其合并到一个依赖中，这样就可以一次性添加到项目的Maven或Gradle构建">
<meta property="og:type" content="article">
<meta property="og:title" content="springboot基础">
<meta property="og:url" content="https://itingyu.github.io/posts/55072/index.html">
<meta property="og:site_name" content="itingyu的博客">
<meta property="og:description" content="https:&#x2F;&#x2F;zhuanlan.zhihu.com&#x2F;p&#x2F;362984115 Spring Boot基础概念： 约定优于配置，简单来说就是你所期待的配置与约定的配置一致，那么就可以不做任何配置，约定不符合期待时才需要对约定进行替换配置。 特征： \1. SpringBoot Starter：他将常用的依赖分组进行了整合，将其合并到一个依赖中，这样就可以一次性添加到项目的Maven或Gradle构建">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-547fd47b7511da47e58c649b304b57dd_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-681b63a841ce017d7a63179702e7bccd_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-4467a1e457af28033b7ec6380f011d4a_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-563eaf5ce882686336c8c0aff07207ce_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-82fed3dc047df18450d04703cfb59d09_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/77dbf2aa3da2a3e20b283f4e6d87d683.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-3c46f5da42820de49e5eb8c7fab65ee0_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/7f17d70f867079492113f8b059f75f52.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/419fdd85b673bc81b47462087832495f.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-46bc2d61fb489ac6479cc6dc3d904b3f_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/50cefd596b49454e6f83614326e1d133.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-66cfb71ce0fe557b0f01ee2f5fc962db_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-2a25e9bf2907c9324e02df140a0a479e_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-200a5543f214f7ffc51a355cd8010386_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/ac14dc52174c5d80909a4c55f75a9ad0.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-5a894b73358fa839b3a62fb2ac1c9d37_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-bab52f59e94863057502641359786101_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-f2280e410b105c13c3e1a6be4c4cdc12_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/cd6d26905de460b83d3f8f57239e4684.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-cb1e6741b77460de2218ff471954e083_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-cd1bd350c238d0dfaf964490be563cee_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/5ae2a7138e30cacdfa039dae5116abfa.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-81d3560f78fa1d53e0476fe26ca62a4d_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-efbdd5a6b19c41cf74eb48480555ad1a_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/c8df0550e8a1ad6c4de838c5d673660b.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/243c5c0883b8f02a7bae759503c6251f.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/c7c9d64d97215cb2825de48ac50c4768.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/1ab9f83cf689a59afb277788fc81471e.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/08512621486c2ce5cc63e363633cb401.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/4e77f6111ea26288f8c0e68fead24c62.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/6d22214eff558e2f52171e18f17113c5.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-1a3d199490c191d25e0f709ce4b16c85_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/394bbbed333d039e38d5672e59bfaead.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/7413e26b619d591dea0cb25b7126c63d.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/ce3c18529bdd8f574a5d05104a513255.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/b6aaeee6a511ef8b4b15e01ac9214854.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-868085c7957d052673fc4e8b4e0b7185_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-a470c307d7fd48396a578ffb742601db_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-bc946ff6b39e3cb434d3debcc30d23a2_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/625ff771f691ae5678c3f3bbc6d58540.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-70b19eb776556de1c01454ff58de3e17_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-3a37ceedb2cc9d19a13ef7a34bf8f7d1_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-6935ab05923e55d2e938200e3a12b988_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-0b9745335e09d707774295329dd2f0da_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/121ee709f2e3c2cd70e36c5449e965b8.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-bb5291c3b15d677b91e58af4f9916907_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-dab2c72f5a1f878026c75aa1a51a9e6a_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/cbfaf2e7a3897bcd0e028678ffd6d1ab.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-1e6100b11d0252991089d6764d65cbfb_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-94ecab2625048a815b5d8231dcea5c81_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-0823169e8e7cd2ccdb3cf9d5110a180a_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-11fd5acfa745d0b7c33f0c6c30aae50f_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/20594f69efe71b4ec28c7c41e113ef75.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-f03ae84183ddc2644f347e493277af6e_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-e53f2643f3a0606937cc7baf0ebf8886_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-89a1924292b8390a144718807ed97b8f_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-dc58004a87011062fb8cb341c354b9df_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-757bf1e06eb243c698991599314efbb3_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-b0231e81c593502a788c0fa7ec71ce0e_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-7f6d3c5722c9674e3250045553f92423_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-f58152cb940e9f6975db26a80874c30f_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-542814d1a89f8ab7f6d966be93f19a59_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-b907de96388ba5d329b230dbf3e318a6_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-ab266871b53a12740877843c927b8a2e_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-63c4fa85ff2494daf3bbce66ba53b18e_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/6eb4e5e181da8da4217945cee440705b.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-ec058905218e8316dda9999fa534af6a_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-7a2302437a9a09e4bfddeec9904eed30_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-6dac40a4c057c30652ebee8dd78e98d0_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-110be9e066c85757b0b8f4988db4e772_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-221356e1a3b48e21e5b7796c4734f1e1_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-886203bc7497163c3b430965d3dcf78f_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-2913ef8d3f9de278faff8a33ad02bfd4_720w.webp">
<meta property="og:image" content="https://pic2.zhimg.com/80/v2-efdeaf3907d34324c98e3bcf04a52401_720w.webp">
<meta property="og:image" content="https://pic4.zhimg.com/80/v2-aa0336560f0e349e5966b2514c8f8853_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-78b8e1008e1bb87088de9e9cce56aae8_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-d10a7b4bb6fa282af8cc5228edbba92c_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-91a2a844807619655cf374d1bc51cf7c_720w.webp">
<meta property="og:image" content="https://itingyu.github.io/posts/55072/assets/c1438474d1b655dccc5631d3499d19e4.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-791dcbe38404ce499c7fe9827f7e1ba0_720w.webp">
<meta property="og:image" content="https://pic3.zhimg.com/80/v2-bf315b92ded859ce1dfa007eaec2cdf6_720w.webp">
<meta property="og:image" content="https://pic1.zhimg.com/80/v2-f3521450557074b44d319a72a2e8b6f0_720w.webp">
<meta property="article:published_time" content="2023-06-14T16:58:24.000Z">
<meta property="article:modified_time" content="2023-06-15T04:49:21.000Z">
<meta property="article:author" content="itingyu">
<meta property="article:tag" content="基础知识">
<meta property="article:tag" content="springboot">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://pic2.zhimg.com/80/v2-547fd47b7511da47e58c649b304b57dd_720w.webp">


<link rel="canonical" href="https://itingyu.github.io/posts/55072/">



<script class="next-config" data-name="page" type="application/json">{"sidebar":"","isHome":false,"isPost":true,"lang":"zh-CN","comments":true,"permalink":"https://itingyu.github.io/posts/55072/","path":"posts/55072/","title":"springboot基础"}</script>

<script class="next-config" data-name="calendar" type="application/json">""</script>
<title>springboot基础 | itingyu的博客 - 记录一些琐事罢了</title>
  

  <script src="/js/third-party/analytics/baidu-analytics.js"></script>
  <script async src="https://hm.baidu.com/hm.js?110223c912240ddb52d1b392e8e96073# <app_id>"></script>







  <noscript>
    <link rel="stylesheet" href="/css/noscript.css">
  </noscript>
  <meta name="Robots" contect= "all">
<link rel="alternate" href="/atom.xml" title="itingyu的博客" type="application/atom+xml">
</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <div class="column">
      <header class="header" itemscope itemtype="http://schema.org/WPHeader"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏" role="button">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <p class="site-title">itingyu的博客</p>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">记录一些琐事罢了</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger" aria-label="搜索" role="button">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu"><li class="menu-item menu-item-home"><a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a></li><li class="menu-item menu-item-categories"><a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">22</span></a></li><li class="menu-item menu-item-tags"><a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">22</span></a></li><li class="menu-item menu-item-links"><a href="/links/" rel="section"><i class="fa fa-link fa-fw"></i>链接</a></li><li class="menu-item menu-item-guestbook"><a href="/guestbook/" rel="section"><i class="fa fa-comment fa-fw"></i>留言板</a></li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close" role="button">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</header>
        
  
  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <div class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Boot%E5%9F%BA%E7%A1%80"><span class="nav-number">1.</span> <span class="nav-text">Spring Boot基础</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Boot%E5%88%9B%E5%BB%BA"><span class="nav-number">2.</span> <span class="nav-text">Spring Boot创建</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Boot%E7%83%AD%E9%83%A8%E7%BD%B2"><span class="nav-number">3.</span> <span class="nav-text">Spring Boot热部署</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%85%A8%E5%B1%80%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E4%BC%98%E5%85%88%E7%BA%A7"><span class="nav-number">4.</span> <span class="nav-text">全局配置文件优先级</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89application-properties-%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E6%B3%A8%E5%85%A5IOC%E5%AE%B9%E5%99%A8"><span class="nav-number">5.</span> <span class="nav-text">自定义application.properties 配置文件注入IOC容器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#application-yaml%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">6.</span> <span class="nav-text">application.yaml配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E5%B1%9E%E6%80%A7%E6%B3%A8%E5%85%A5"><span class="nav-number">7.</span> <span class="nav-text">属性注入</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Spring-Boot%E6%97%A5%E5%BF%97%E6%A1%86%E6%9E%B6"><span class="nav-number">8.</span> <span class="nav-text">Spring Boot日志框架</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring-boot-starter-parent"><span class="nav-number">9.</span> <span class="nav-text">spring-boot-starter-parent</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#spring-boot-starter-web"><span class="nav-number">10.</span> <span class="nav-text">spring-boot-starter-web</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-SpringBootApplication"><span class="nav-number">11.</span> <span class="nav-text">自动配置@SpringBootApplication</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-SpringBootConfiguration"><span class="nav-number">12.</span> <span class="nav-text">自动配置@SpringBootConfiguration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E9%80%9A%E8%BF%87%E4%B8%8A%E9%9D%A2%E5%8F%AF%E4%BB%A5%E5%8F%91%E7%8E%B0%E6%88%91%E4%BB%AC%E7%9A%84%E6%A0%B8%E5%BF%83%E5%90%AF%E5%8A%A8%E7%B1%BB%E6%B3%A8%E8%A7%A3%E6%BA%90%E7%A0%81%E4%B8%AD%E5%90%AB%E6%AD%A4%E6%B3%A8%E8%A7%A3%EF%BC%8C%E8%BF%99%E4%B8%AA%E6%B3%A8%E8%A7%A3%E6%A0%87%E6%B3%A8%E5%9C%A8%E6%9F%90%E4%B8%AA%E7%B1%BB%E4%B8%8A%EF%BC%8C%E8%A1%A8%E7%A4%BA%E8%BF%99%E6%98%AF%E4%B8%80%E4%B8%AA-Spring-Boot%E7%9A%84%E9%85%8D%E7%BD%AE%E7%B1%BB%E3%80%82%E4%BB%96%E7%9A%84%E6%A0%B8%E5%BF%83%E4%BB%A3%E7%A0%81%E4%B8%AD%EF%BC%8C%E5%86%85%E9%83%A8%E6%9C%89%E4%B8%80%E4%B8%AA%E6%A0%B8%E5%BF%83%E6%B3%A8%E8%A7%A3-Configuration%E6%9D%A5%E8%A1%A8%E6%98%8E%E5%BD%93%E5%89%8D%E7%B1%BB%E6%98%AF%E9%85%8D%E7%BD%AE%E7%B1%BB%EF%BC%8C%E5%B9%B6%E4%B8%94%E5%8F%AF%E4%BB%A5%E8%A2%AB%E7%BB%84%E4%BB%B6%E6%89%AB%E6%8F%8F%E5%99%A8%E6%89%AB%E5%88%B0%EF%BC%8C%E6%89%80%E4%BB%A5-SpringBootConfiguration%E4%B8%8E-Configuration%E5%85%B7%E6%9C%89%E7%9B%B8%E5%90%8C%E4%BD%9C%E7%94%A8%EF%BC%8C%E5%8F%AA%E6%98%AF%E5%89%8D%E8%80%85%E5%8F%88%E5%81%9A%E4%BA%86%E4%B8%80%E6%AC%A1%E5%B0%81%E8%A3%85%E3%80%82"><span class="nav-number">13.</span> <span class="nav-text">通过上面可以发现我们的核心启动类注解源码中含此注解，这个注解标注在某个类上，表示这是一个 Spring Boot的配置类。他的核心代码中，内部有一个核心注解@Configuration来表明当前类是配置类，并且可以被组件扫描器扫到，所以@SpringBootConfiguration与@Configuration具有相同作用，只是前者又做了一次封装。</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-EnableAutoConfiguration"><span class="nav-number">14.</span> <span class="nav-text">自动配置@ EnableAutoConfiguration</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AE-Import-AutoConfigurationImportSelector-class"><span class="nav-number">15.</span> <span class="nav-text">自动配置@Import(AutoConfigurationImportSelector.class)</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E8%87%AA%E5%8A%A8%E9%85%8D%E7%BD%AEHttpEncodingAutoConfiguration%E5%AE%9E%E4%BE%8B"><span class="nav-number">16.</span> <span class="nav-text">自动配置HttpEncodingAutoConfiguration实例</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#ComponentScan%E6%B3%A8%E8%A7%A3"><span class="nav-number">17.</span> <span class="nav-text">@ComponentScan注解</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#%E6%BA%90%E7%A0%81%E5%89%96%E6%9E%90Run%E6%96%B9%E6%B3%95%E6%95%B4%E4%BD%93%E6%B5%81%E7%A8%8B"><span class="nav-number">18.</span> <span class="nav-text">源码剖析Run方法整体流程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run%E6%96%B9%E6%B3%95%E7%AC%AC%E4%B8%80%E6%AD%A5%EF%BC%9A%E8%8E%B7%E5%8F%96%E5%B9%B6%E5%90%AF%E5%8A%A8%E7%9B%91%E5%90%AC%E5%99%A8"><span class="nav-number">19.</span> <span class="nav-text">Run方法第一步：获取并启动监听器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run%E6%96%B9%E6%B3%95%E7%AC%AC%E4%BA%8C%E6%AD%A5%EF%BC%9A%E6%9E%84%E9%80%A0%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E7%8E%AF%E5%A2%83"><span class="nav-number">20.</span> <span class="nav-text">Run方法第二步：构造应用上下文环境</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run%E6%96%B9%E6%B3%95%E7%AC%AC%E4%B8%89%E6%AD%A5%EF%BC%9A%E5%88%9D%E5%A7%8B%E5%8C%96%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="nav-number">21.</span> <span class="nav-text">Run方法第三步：初始化应用上下文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run%E6%96%B9%E6%B3%95%E7%AC%AC%E5%9B%9B%E6%AD%A5%EF%BC%9A%E5%88%B7%E6%96%B0%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E5%89%8D%E7%9A%84%E5%87%86%E5%A4%87%E9%98%B6%E6%AE%B5"><span class="nav-number">22.</span> <span class="nav-text">Run方法第四步：刷新应用上下文前的准备阶段</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run%E6%96%B9%E6%B3%95%E7%AC%AC%E4%BA%94%E6%AD%A5%EF%BC%9A%E5%88%B7%E6%96%B0%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="nav-number">23.</span> <span class="nav-text">Run方法第五步：刷新应用上下文</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#Run%E6%96%B9%E6%B3%95%E7%AC%AC%E5%85%AD%E6%AD%A5%EF%BC%9A%E5%88%B7%E6%96%B0%E5%BA%94%E7%94%A8%E4%B8%8A%E4%B8%8B%E6%96%87%E5%90%8E%E7%9A%84%E6%89%A9%E5%B1%95%E6%8E%A5%E5%8F%A3"><span class="nav-number">24.</span> <span class="nav-text">Run方法第六步：刷新应用上下文后的扩展接口</span></a></li></ol></div>
        </div>
        <!--/noindex-->

        <div class="site-overview-wrap sidebar-panel">
          <div class="site-author animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="itingyu"
      src="/images/avatar.jpg">
  <p class="site-author-name" itemprop="name">itingyu</p>
  <div class="site-description" itemprop="description">记录一些编程笔记，比如编程语言java、python、go等语言;redis、rabbitmq等中间件的原理和使用等等</div>
</div>
<div class="site-state-wrap animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
        <a href="/archives/">
          <span class="site-state-item-count">36</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
          <a href="/categories/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
          <a href="/tags/">
        <span class="site-state-item-count">22</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author animated">
      <span class="links-of-author-item">
        <a href="https://github.com/itingyu" title="GitHub → https:&#x2F;&#x2F;github.com&#x2F;itingyu" rel="noopener me" target="_blank"><i class="fab fa-github fa-fw"></i>GitHub</a>
      </span>
      <span class="links-of-author-item">
        <a href="mailto:itingyu@163.com" title="E-Mail → mailto:itingyu@163.com" rel="noopener me" target="_blank"><i class="fa fa-envelope fa-fw"></i>E-Mail</a>
      </span>
  </div>

        </div>
      </div>
    </div>

    
    <div class="sidebar-inner sidebar-blogroll">
      <div class="links-of-blogroll animated">
        <div class="links-of-blogroll-title"><i class="fa fa-globe fa-fw"></i>
          链接
        </div>
        <ul class="links-of-blogroll-list">
            <li class="links-of-blogroll-item">
              <a href="https://hexo-next.readthedocs.io/zh_CN/latest/next/" title="https:&#x2F;&#x2F;hexo-next.readthedocs.io&#x2F;zh_CN&#x2F;latest&#x2F;next&#x2F;" rel="noopener" target="_blank">next中文文档</a>
            </li>
        </ul>
      </div>
    </div>
  </aside>


    </div>

    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="https://itingyu.github.io/posts/55072/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/avatar.jpg">
      <meta itemprop="name" content="itingyu">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="itingyu的博客">
      <meta itemprop="description" content="记录一些编程笔记，比如编程语言java、python、go等语言;redis、rabbitmq等中间件的原理和使用等等">
    </span>

    <span hidden itemprop="post" itemscope itemtype="http://schema.org/CreativeWork">
      <meta itemprop="name" content="springboot基础 | itingyu的博客">
      <meta itemprop="description" content="">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          springboot基础
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2023-06-15 00:58:24" itemprop="dateCreated datePublished" datetime="2023-06-15T00:58:24+08:00">2023-06-15</time>
    </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" itemprop="url" rel="index"><span itemprop="name">基础知识</span></a>
        </span>
          ，
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/springboot/" itemprop="url" rel="index"><span itemprop="name">springboot</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="本文字数">
      <span class="post-meta-item-icon">
        <i class="far fa-file-word"></i>
      </span>
      <span class="post-meta-item-text">本文字数：</span>
      <span>12k</span>
    </span>
</div>

        </div>
      </header>
    
    
    
    <div class="post-body" itemprop="articleBody"><p><a target="_blank" rel="noopener" href="https://zhuanlan.zhihu.com/p/362984115">https://zhuanlan.zhihu.com/p/362984115</a></p>
<h3 id="Spring-Boot基础"><a href="#Spring-Boot基础" class="headerlink" title="Spring Boot基础"></a>Spring Boot基础</h3><p><strong>概念：</strong></p>
<p>约定优于配置，简单来说就是你所期待的配置与约定的配置一致，那么就可以不做任何配置，约定不符合期待时才需要对约定进行替换配置。</p>
<p><strong>特征：</strong></p>
<p>\1. SpringBoot Starter：他将常用的依赖分组进行了整合，将其合并到一个依赖中，这样就可以一次性添加到项目的Maven或Gradle构建中。</p>
<p>2,使编码变得简单，SpringBoot采用 JavaConfig的方式对Spring进行配置，并且提供了大量的注解，极大的提高了工作效率，比如@Configuration和@bean注解结合，基于@Configuration完成类扫描，基于@bean注解把返回值注入IOC容器。</p>
<p>3.自动配置：SpringBoot的自动配置特性利用了Spring对条件化配置的支持，合理地推测应用所需的bean并自动化配置他们。</p>
<p>4.使部署变得简单，SpringBoot内置了三种Servlet容器，Tomcat，Jetty,undertow.我们只需要一个Java的运行环境就可以跑SpringBoot的项目了，SpringBoot的项目可以打成一个jar包。</p>
<h3 id="Spring-Boot创建"><a href="#Spring-Boot创建" class="headerlink" title="Spring Boot创建"></a>Spring Boot创建</h3><p>Spring Boot项目结构图：</p>
<p> <img src="https://pic2.zhimg.com/80/v2-547fd47b7511da47e58c649b304b57dd_720w.webp" alt="img"> </p>
<h3 id="Spring-Boot热部署"><a href="#Spring-Boot热部署" class="headerlink" title="Spring Boot热部署"></a>Spring Boot热部署</h3><p>通过引入spring-bootdevtools插件，可以实现不重启服务器情况下，对项目进行即时编译。引入热部署插件的步骤如下：</p>
<p> \1. 在pom.xml添加热部署依赖 </p>
<p> <img src="https://pic2.zhimg.com/80/v2-681b63a841ce017d7a63179702e7bccd_720w.webp" alt="img"> </p>
<p> \2. IDEA热部署工具设置 </p>
<p> <img src="https://pic3.zhimg.com/80/v2-4467a1e457af28033b7ec6380f011d4a_720w.webp" alt="img"> </p>
<p> 在项目任意页面中使用组合快捷键“Ctrl+Shift+Alt+&#x2F;”打开Maintenance选项框，选中并打开Registry页面，列表中找到“compiler.automake.allow.when.app.running”，将该选项后的Value值勾选，用于指定IDEA工具在程序运行过程中自动编译，最后单击【Close】按钮完成设置。 </p>
<p> <img src="https://pic3.zhimg.com/80/v2-563eaf5ce882686336c8c0aff07207ce_720w.webp" alt="img"> </p>
<p><strong>排除资源:</strong></p>
<p>默认情况下，改变资源 &#x2F;META-INF&#x2F;maven ， &#x2F;META-INF&#x2F;resources ， &#x2F;resources ， &#x2F;static ， &#x2F;public ，或 &#x2F;templates 不触发重新启动，但确会触发现场重装。如果要自定义这些排除项，则可以使用该spring.devtools.restart.exclude 属性。例如，仅排除 &#x2F;static ， &#x2F;public 在application.properties设置以下属性。</p>
<p>spring.devtools.restart.exclude&#x3D;static&#x2F;<strong>,public&#x2F;</strong>,config&#x2F;**</p>
<h3 id="全局配置文件优先级"><a href="#全局配置文件优先级" class="headerlink" title="全局配置文件优先级"></a>全局配置文件优先级</h3><p>优先级：以下图顺序号代表配置文件的优先级，并且相同配置文件按顺序加载可以实现互补，但是不会被覆盖。</p>
<p><img src="https://pic2.zhimg.com/80/v2-82fed3dc047df18450d04703cfb59d09_720w.webp" alt="img"> 注意：Spring Boot 有application.properties 和 application.yaml 两种配置文件的方式，yaml是一种JSON超文本格式文件，如果是2.4.0之前版本，优先级properties&gt;yaml；但是如果是2.4.0的版本，优先级yaml&gt;properties。 </p>
<h3 id="自定义application-properties-配置文件注入IOC容器"><a href="#自定义application-properties-配置文件注入IOC容器" class="headerlink" title="自定义application.properties 配置文件注入IOC容器"></a>自定义application.properties 配置文件注入IOC容器</h3><p> <img src="/posts/55072/assets/77dbf2aa3da2a3e20b283f4e6d87d683.webp" alt="img"> </p>
<p> <img src="https://pic1.zhimg.com/80/v2-3c46f5da42820de49e5eb8c7fab65ee0_720w.webp" alt="img"> </p>
<p> 填加相应依赖配置可以实现在自定义配置properties配置提示 </p>
<p> <img src="/posts/55072/assets/7f17d70f867079492113f8b059f75f52.webp" alt="img"> </p>
<p> @ConfigurationProperties(prefix &#x3D; “person”)注解的作用是将配置文件中以person开头的属性值通过setXX()方法注入到实体类对应属性中。 </p>
<p> @Component注解的作用是将当前注入属性值的Person类对象作为Bean组件放到Spring容器中，只有这样才能被@ConfigurationProperties注解进行赋值。 </p>
<h3 id="application-yaml配置文件"><a href="#application-yaml配置文件" class="headerlink" title="application.yaml配置文件"></a>application.yaml配置文件</h3><p>YAML文件格式是Spring Boot支持的一种JSON超集文件格式，以数据为中心，比properties、xml等更适合做配置文件.</p>
<p>1.yml和xml相比，少了一些结构化的代码，使数据更直接，一目了然</p>
<p>2.相比properties文件更简洁</p>
<p>3.yaml文件的扩展名可以使用.yml或者.yaml。</p>
<p>4.application.yml文件使用 “key:（空格）value”格式配置属性，使用缩进控制层级关系。</p>
<p> <img src="/posts/55072/assets/419fdd85b673bc81b47462087832495f.webp" alt="img"> </p>
<h3 id="属性注入"><a href="#属性注入" class="headerlink" title="属性注入"></a>属性注入</h3><p> 如果配置属性是Spring Boot已有属性，例如服务端口server.port，那么Spring Boot内部会自动扫描并读取这些配置文件中的属性值并覆盖默认属性。 </p>
<p>@Configuration：声明一个类作为配置类。</p>
<p>@Bean：声明在方法上，将方法的返回值加入Bean容器。</p>
<p>@Value：属性注入</p>
<p> <img src="https://pic4.zhimg.com/80/v2-46bc2d61fb489ac6479cc6dc3d904b3f_720w.webp" alt="img"> </p>
<p> <img src="/posts/55072/assets/50cefd596b49454e6f83614326e1d133.webp" alt="img"> </p>
<p> @ConfigurationProperties(prefix &#x3D; “jdbc”)：批量属性注入。 </p>
<p> <img src="https://pic4.zhimg.com/80/v2-66cfb71ce0fe557b0f01ee2f5fc962db_720w.webp" alt="img"> </p>
<p> @PropertySource(“classpath:&#x2F;jdbc.properties”)指定外部属性文件，在类上添加。 </p>
<p> <strong>第三方配置：</strong> </p>
<p> @ConfigurationProperties 用于注释类之外，您还可以在公共 @Bean 方法上使用它。将属性绑定到控件之外的第三方组件 </p>
<p> <img src="https://pic3.zhimg.com/80/v2-2a25e9bf2907c9324e02df140a0a479e_720w.webp" alt="img"> </p>
<p> <img src="https://pic3.zhimg.com/80/v2-200a5543f214f7ffc51a355cd8010386_720w.webp" alt="img"> </p>
<p><strong>松散绑定：</strong></p>
<p>Spring Boot使用一些宽松的规则将环境属性绑定到@ConfigurationProperties bean，因此环境属性名和bean属性名之间不需要完全匹配，比如在application.properties文件里定义一个first-name&#x3D;tom，在对应bean类中使用firstName也能获取到对应的值，这就是松散绑定。</p>
<p> <img src="/posts/55072/assets/ac14dc52174c5d80909a4c55f75a9ad0.webp" alt="img"> </p>
<p> <img src="https://pic4.zhimg.com/80/v2-5a894b73358fa839b3a62fb2ac1c9d37_720w.webp" alt="img"> </p>
<h3 id="Spring-Boot日志框架"><a href="#Spring-Boot日志框架" class="headerlink" title="Spring Boot日志框架"></a>Spring Boot日志框架</h3><p> <img src="https://pic2.zhimg.com/80/v2-bab52f59e94863057502641359786101_720w.webp" alt="img"> </p>
<p> <strong>SLF4J 的使用：</strong> </p>
<p> <img src="https://pic3.zhimg.com/80/v2-f2280e410b105c13c3e1a6be4c4cdc12_720w.webp" alt="img"> </p>
<p> 注意:由于每一个日志的实现框架都有自己的配置文件，所以在使用 SLF4j 之后，配置文件还是要使用实现日志框架的配置文件。 </p>
<p><strong>统一日志框架使用：</strong></p>
<p>实现步骤</p>
<p>\1. 排除系统中的其他日志框架。</p>
<p>\2. 使用中间包替换要替换的日志框架。</p>
<p>\3. 导入我们选择的 SLF4J 实现。</p>
<p> <img src="/posts/55072/assets/cd6d26905de460b83d3f8f57239e4684.webp" alt="img"> </p>
<p> 从图中我们得到一种统一日志框架使用的方式，可以使用一种要替换的日志框架类完全一样的 jar 进行替换，这样不至于原来的第三方 jar 报错，而这个替换的 jar 其实使用了 SLF4J API. 这样项目中的日志就都可以通过 SLF4J API 结合自己选择的框架进行日志输出。 </p>
<p> <strong>自定义日志输出：</strong> </p>
<p> 可以在配置文件编写日志相关配置实现自定义日志输出。 </p>
<p> <img src="https://pic4.zhimg.com/80/v2-cb1e6741b77460de2218ff471954e083_720w.webp" alt="img"> </p>
<p> <strong>替换日志框架：</strong> </p>
<p> <img src="https://pic3.zhimg.com/80/v2-cd1bd350c238d0dfaf964490be563cee_720w.webp" alt="img"> </p>
<h3 id="spring-boot-starter-parent"><a href="#spring-boot-starter-parent" class="headerlink" title="spring-boot-starter-parent"></a>spring-boot-starter-parent</h3><p> Spring Boot项目的统一版本父项目依赖管理。 </p>
<p> <img src="/posts/55072/assets/5ae2a7138e30cacdfa039dae5116abfa.webp" alt="img"> </p>
<p> 在底层源文件定义了工程的Java版本；工程代码的编译源文件编码格式；工程编译后的文件编码格式；Maven打包编译的版本。 </p>
<p> <img src="https://pic2.zhimg.com/80/v2-81d3560f78fa1d53e0476fe26ca62a4d_720w.webp" alt="img"> </p>
<p> 接着在build节点做了资源过滤 </p>
<p> <img src="https://pic3.zhimg.com/80/v2-efbdd5a6b19c41cf74eb48480555ad1a_720w.webp" alt="img"> </p>
<p> 接着从spring-boot-starter-parent找到他父依赖 spring-boot-dependencies，从里面就可以发现里面定义了各种版本声明，通过这里声明可以让部分依赖不需要写版本号，一些没有引入的第三方jar包仍然需要自己声明版本号。 </p>
<p> <img src="/posts/55072/assets/c8df0550e8a1ad6c4de838c5d673660b.webp" alt="img"> </p>
<h3 id="spring-boot-starter-web"><a href="#spring-boot-starter-web" class="headerlink" title="spring-boot-starter-web"></a>spring-boot-starter-web</h3><p> Spring Boot项目的所依赖jar包进行打包起步依赖管理 </p>
<p> 在spring-boot-starter-web的父依赖spring-boot-starters包中，可以发现在他的dependencies标签有着各种依赖包引入，点进去就是具体包的导入配置管理。 </p>
<p> <img src="/posts/55072/assets/243c5c0883b8f02a7bae759503c6251f.webp" alt="img"> </p>
<p> 注意：Spring Boot官方并不是针对所有场景开发的技术框架都提供了场景启动器，例如阿里巴巴的Druid数据源等，Spring Boot官方就没有提供对应的依赖启动器。为了充分利用Spring Boot框架的优势，在Spring Boot官方没有整合这些技术框架的情况下，Druid等技术框架所在的开发团队主动与Spring Boot框架进行了整合，实现了各自的依赖启动器，例如druid-spring-boot-starter等。我们在pom.xml文件中引入这些第三方的依赖启动器时，切记要配置对应的版本号。 </p>
<h3 id="自动配置-SpringBootApplication"><a href="#自动配置-SpringBootApplication" class="headerlink" title="自动配置@SpringBootApplication"></a>自动配置@SpringBootApplication</h3><p> 他是一个组合注解，核心代码： </p>
<p> <img src="/posts/55072/assets/c7c9d64d97215cb2825de48ac50c4768.webp" alt="img"> </p>
<h3 id="自动配置-SpringBootConfiguration"><a href="#自动配置-SpringBootConfiguration" class="headerlink" title="自动配置@SpringBootConfiguration"></a>自动配置@SpringBootConfiguration</h3><h3 id="通过上面可以发现我们的核心启动类注解源码中含此注解，这个注解标注在某个类上，表示这是一个-Spring-Boot的配置类。他的核心代码中，内部有一个核心注解-Configuration来表明当前类是配置类，并且可以被组件扫描器扫到，所以-SpringBootConfiguration与-Configuration具有相同作用，只是前者又做了一次封装。"><a href="#通过上面可以发现我们的核心启动类注解源码中含此注解，这个注解标注在某个类上，表示这是一个-Spring-Boot的配置类。他的核心代码中，内部有一个核心注解-Configuration来表明当前类是配置类，并且可以被组件扫描器扫到，所以-SpringBootConfiguration与-Configuration具有相同作用，只是前者又做了一次封装。" class="headerlink" title="通过上面可以发现我们的核心启动类注解源码中含此注解，这个注解标注在某个类上，表示这是一个 Spring Boot的配置类。他的核心代码中，内部有一个核心注解@Configuration来表明当前类是配置类，并且可以被组件扫描器扫到，所以@SpringBootConfiguration与@Configuration具有相同作用，只是前者又做了一次封装。"></a>通过上面可以发现我们的核心启动类注解源码中含此注解，这个注解标注在某个类上，表示这是一个 Spring Boot的配置类。他的核心代码中，内部有一个核心注解@Configuration来表明当前类是配置类，并且可以被组件扫描器扫到，所以@SpringBootConfiguration与@Configuration具有相同作用，只是前者又做了一次封装。</h3><h3 id="自动配置-EnableAutoConfiguration"><a href="#自动配置-EnableAutoConfiguration" class="headerlink" title="自动配置@ EnableAutoConfiguration"></a>自动配置@ EnableAutoConfiguration</h3><p>Spring 中有很多以 Enable 开头的注解，其作用就是借助 @Import 来收集并注册特定场景相关的Bean ，并加载到 IOC 容器。而这个注解就是借助@Import来收集所有符合自动配置条件的bean定义，并加载到IoC容器，他的核心源码如下：</p>
<p> <img src="/posts/55072/assets/1ab9f83cf689a59afb277788fc81471e.webp" alt="img"> </p>
<p> 通过@AutoConfigurationPackage注解进入类别，发现他通过import引入了一个AutoConfigurationPackages.Registrar.class，在Registrar.class中就重写了一个registerBeanDefinitions方法，在方法内部调用了一个register方法来实现将注解标注的元信息传入，获取到相应的包名。通俗点就是注册bean，然后根据 @AutoConfigurationPackage找到需要注册bean的类路径，这个路径就被自动保存了下来，后面需要使用bean，就直接获取使用，比如Spring Boot整合JPA可以完成一些注解扫描。 </p>
<p> <img src="/posts/55072/assets/08512621486c2ce5cc63e363633cb401.webp" alt="img"> </p>
<h3 id="自动配置-Import-AutoConfigurationImportSelector-class"><a href="#自动配置-Import-AutoConfigurationImportSelector-class" class="headerlink" title="自动配置@Import(AutoConfigurationImportSelector.class)"></a>自动配置@Import(AutoConfigurationImportSelector.class)</h3><p>该注解是Spring boot的底层注解，AutoConfigurationImportSelector类可以帮助 Springboot 应用将所有符合条件的 @Configuration配置都加载到当前Spring Boot创建并使用的IOC容器( ApplicationContext )中。</p>
<p><img src="/posts/55072/assets/4e77f6111ea26288f8c0e68fead24c62.webp" alt="img"></p>
<p><img src="/posts/55072/assets/6d22214eff558e2f52171e18f17113c5.webp" alt="img"></p>
<p>该注解实现了实现了 DeferredImportSelector 接口和各种Aware 接口，在源码中截图中，通过四个接口回调，把值返回给了</p>
<p>定义的四个成员变量。</p>
<p>1.自动配置逻辑相关的入口方法在 DeferredImportSelectorGrouping 类的 getImports 方法。</p>
<p><img src="https://pic2.zhimg.com/80/v2-1a3d199490c191d25e0f709ce4b16c85_720w.webp" alt="img"></p>
<p>2.自动配置的相关的绝大部分逻辑全在第一处也就是this.group.proces方法里，主要做的事就是在方法中，传入的 AutoConfigurationImportSelector对象来选择一些符合条件的自动配置类，过滤掉一些不符合条件的自动配置类，而第二处的this.group.selectImports的方法主要是针对前面的process方法处理后的自动配置类再进一步有选择的选择导入。</p>
<p><img src="/posts/55072/assets/394bbbed333d039e38d5672e59bfaead.webp" alt="img"></p>
<p>3.进入getAutoConfigurationEntry方法，这个方法主要是用来获取自动配置类有关，承担了自动配置的主要逻辑。AutoConfigurationEntry 方法主要做的事情就是获取符合条件的自动配置类，避免加载不必要的自动配置类从而造成内存浪费</p>
<p><img src="/posts/55072/assets/7413e26b619d591dea0cb25b7126c63d.webp" alt="img"></p>
<p><img src="/posts/55072/assets/ce3c18529bdd8f574a5d05104a513255.webp" alt="img"></p>
<p>4.进入getCandidateConfigurations方法，里面有一个重要方法 loadFactoryNames ，这个方法是让 SpringFactoryLoader 去加载一些组件的名字。</p>
<p><img src="/posts/55072/assets/b6aaeee6a511ef8b4b15e01ac9214854.webp" alt="img"></p>
<p>5.进入 loadFactoryNames方法，获取到出入的键factoryClassName。</p>
<p><img src="https://pic2.zhimg.com/80/v2-868085c7957d052673fc4e8b4e0b7185_720w.webp" alt="img"></p>
<p>6.进入loadSpringFactories方法，加载配置文件，而这个配置文件就是spring.factories文件</p>
<p><img src="https://pic4.zhimg.com/80/v2-a470c307d7fd48396a578ffb742601db_720w.webp" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-bc946ff6b39e3cb434d3debcc30d23a2_720w.webp" alt="img"></p>
<p>由此我们可以知道，在这个方法中会遍历整个ClassLoader中所有jar包下的spring.factories文件。spring.factories里面保存着springboot的默认提供的自动配置类。</p>
<p><strong>AutoConfigurationEntry 方法主要做的事情：</strong></p>
<p>【1】从 spring.factories 配置文件中加载 EnableAutoConfiguration 自动配置类）,获取的自动配置类如图所示。</p>
<p>【2】若 @EnableAutoConfiguration 等注解标有要 exclude 的自动配置类，那么再将这个自动配置类排除掉；</p>
<p>【3】排除掉要 exclude 的自动配置类后，然后再调用 filter 方法进行进一步的过滤，再次排除一些不符合条件的自动配置类；</p>
<p>【4】经过重重过滤后，此时再触发 AutoConfigurationImportEvent 事件，告诉ConditionEvaluationReport 条件评估报告器对象来记录符合条件的自动配置类；</p>
<p>【5】 最后再将符合条件的自动配置类返回。</p>
<p><strong>AutoConfigurationImportSelector 的 filter 方法</strong></p>
<p>主要做的事情就是调用AutoConfigurationImportFilter 接口的 match 方法来判断每一个自动配置类上的条件注解（若有的话） @ConditionalOnClass , @ConditionalOnBean 或 @ConditionalOnWebApplication 是否满足条件，若满足，则返回true，说明匹配，若不满足，则返回false说明不匹配。其实就是排除自动配置类，因为全部加载出来的类太多，不需要全部都反射成对象，而这个方法就是通过注解进行该自动配置类是否有相应匹配的类的判断，存在即加入，不存在即过滤。</p>
<p>@Conditional是Spring4新提供的注解，它的作用是按照一定的条件进行判断，满足条件给容器注册bean。</p>
<p>@ConditionalOnBean：仅仅在当前上下文中存在某个对象时，才会实例化一个Bean。</p>
<p>@ConditionalOnClass：某个class位于类路径上，才会实例化一个Bean。</p>
<p>@ConditionalOnExpression：当表达式为true的时候，才会实例化一个Bean。基于SpEL表达式的条件判断。</p>
<p>@ConditionalOnMissingBean：仅仅在当前上下文中不存在某个对象时，才会实例化一个Bean。</p>
<p>@ConditionalOnMissingClass：某个class类路径上不存在的时候，才会实例化一个Bean。</p>
<p>@ConditionalOnNotWebApplication：不是web应用，才会实例化一个Bean。</p>
<p>@ConditionalOnWebApplication：当项目是一个Web项目时进行实例化。</p>
<p>@ConditionalOnNotWebApplication：当项目不是一个Web项目时进行实例化。</p>
<p>@ConditionalOnProperty：当指定的属性有指定的值时进行实例化。</p>
<p>@ConditionalOnJava：当JVM版本为指定的版本范围时触发实例化。</p>
<p>@ConditionalOnResource：当类路径下有指定的资源时触发实例化。</p>
<p>@ConditionalOnJndi：在JNDI存在的条件下触发实例化。</p>
<p>@ConditionalOnSingleCandidate：当指定的Bean在容器中只有一个，或者有多个但是指定了首选的Bean时触发实例化。</p>
<p><strong>有选择的导入自动配置类</strong></p>
<p>在第一步最后的一个方法this.group.selectImports主要是针对经过排除掉 exclude 的和被AutoConfigurationImportFilter 接口过滤后的满足条件的自动配置类再进一步排除 exclude 的自动配置类，然后再排序，至此实现了自动配置。</p>
<p> <img src="/posts/55072/assets/625ff771f691ae5678c3f3bbc6d58540.webp" alt="img"> </p>
<p> <img src="https://pic4.zhimg.com/80/v2-70b19eb776556de1c01454ff58de3e17_720w.webp" alt="img"> </p>
<h3 id="自动配置HttpEncodingAutoConfiguration实例"><a href="#自动配置HttpEncodingAutoConfiguration实例" class="headerlink" title="自动配置HttpEncodingAutoConfiguration实例"></a>自动配置HttpEncodingAutoConfiguration实例</h3><p><img src="https://pic2.zhimg.com/80/v2-3a37ceedb2cc9d19a13ef7a34bf8f7d1_720w.webp" alt="img"></p>
<p><img src="https://pic1.zhimg.com/80/v2-6935ab05923e55d2e938200e3a12b988_720w.webp" alt="img"></p>
<p>\1. SpringBoot 启动会加载大量的自动配置类</p>
<p>2.我们看我们需要实现的功能有没有 SpringBoot 默认写好的自动配置类</p>
<p>3.我们再来看这个自动配置类中到底配置了哪些组件；（只要我们有我们要用的组件，我们就不需要再来配置了）</p>
<p>4.给容器中自动配置类添加组件的时候，会从 properties 类中获取某些属性，我们就可以在配置文件中指定这些属性的值。</p>
<p>xxxAutoConfiguration ：自动配置类，用于给容器中添加组件从而代替之前我们手动完成大量繁琐的配置。</p>
<p>xxxProperties : 封装了对应自动配置类的默认属性值，如果我们需要自定义属性值，只需要根据xxxProperties 寻找相关属性在配置文件设值即可。</p>
<h3 id="ComponentScan注解"><a href="#ComponentScan注解" class="headerlink" title="@ComponentScan注解"></a>@ComponentScan注解</h3><p>主要作用是从定义的扫描路径中，找出标识了需要装配的类自动装配到spring 的bean容器中。默认扫描路径是为@ComponentScan注解的类所在的包为基本的扫描路径（也就是标注了@SpringBootApplication注解的项目启动类所在的路径），所以这里就解释了之前spring boot为什么只能扫描自己所在类的包及其子包。</p>
<p>常用属性：</p>
<p>basePackages、value：指定扫描路径，如果为空则以@ComponentScan注解的类所在的包为基本的扫描路径。</p>
<p>basePackageClasses：指定具体扫描的类。</p>
<p>includeFilters：指定满足Filter条件的类。</p>
<p>excludeFilters：指定排除Filter条件的类。</p>
<p><img src="https://pic3.zhimg.com/80/v2-0b9745335e09d707774295329dd2f0da_720w.webp" alt="img"></p>
<p>SpringApplication() 构造方法</p>
<p><img src="/posts/55072/assets/121ee709f2e3c2cd70e36c5449e965b8.webp" alt="img"></p>
<p>第二步getSpringFactoriesInstances方法解析</p>
<p><img src="https://pic4.zhimg.com/80/v2-bb5291c3b15d677b91e58af4f9916907_720w.webp" alt="img"></p>
<p>主要就是 loadFactoryNames()方法，这个方法是spring-core中提供的从META-INF&#x2F;spring.factories中获取指定的类（key）的同一入口方法，获取的是key为 org.springframework.context.ApplicationContextInitializer 的类，是Spring框架的类, 这个类的主要目的就是在ConfigurableApplicationContext 调用refresh()方法之前，回调这个类的initialize方法。通过 ConfigurableApplicationContext 的实例获取容器的环境Environment，从而实现对配置文件的修改完善等工作。</p>
<p><img src="https://pic3.zhimg.com/80/v2-dab2c72f5a1f878026c75aa1a51a9e6a_720w.webp" alt="img"></p>
<p><img src="/posts/55072/assets/cbfaf2e7a3897bcd0e028678ffd6d1ab.webp" alt="img"></p>
<h3 id="源码剖析Run方法整体流程"><a href="#源码剖析Run方法整体流程" class="headerlink" title="源码剖析Run方法整体流程"></a>源码剖析Run方法整体流程</h3><p>重要六步：</p>
<p>第一步：获取并启动监听器</p>
<p>第二步：构造应用上下文环境</p>
<p>第三步：初始化应用上下文</p>
<p>第四步：刷新应用上下文前的准备阶段</p>
<p>第五步：刷新应用上下文</p>
<p>第六步：刷新应用上下文后的扩展接口</p>
<p><img src="https://pic4.zhimg.com/80/v2-1e6100b11d0252991089d6764d65cbfb_720w.webp" alt="img"></p>
<p><img src="https://pic2.zhimg.com/80/v2-94ecab2625048a815b5d8231dcea5c81_720w.webp" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-0823169e8e7cd2ccdb3cf9d5110a180a_720w.webp" alt="img"></p>
<h3 id="Run方法第一步：获取并启动监听器"><a href="#Run方法第一步：获取并启动监听器" class="headerlink" title="Run方法第一步：获取并启动监听器"></a>Run方法第一步：获取并启动监听器</h3><p>事件机制在Spring是很重要的一部分内容，通过事件机制我们可以监听Spring容器中正在发生的一些事件，同样也可以自定义监听事件。Spring的事件为Bean和Bean之间的消息传递提供支持。当一个对象处理完某种任务后，通知另外的对象进行某些处理，常用的场景有进行某些操作后发送通知，消息、邮件等情况。</p>
<p><img src="https://pic4.zhimg.com/80/v2-11fd5acfa745d0b7c33f0c6c30aae50f_720w.webp" alt="img"></p>
<p>通过getRunListeners方法来获取监听器，在getRunListeners方法内部调用了一个getSpringFactoriesInstances方法，返回值是一个SpringApplicationRunListeners有参构造的监听器类，这个方法加载SpringApplicationRunListener类，把这个类当做key,这个类的作用就是负责在SpringBoot启动的不同阶段，广播出不同的消息，传递给ApplicationListener监听器实现类。</p>
<p><img src="/posts/55072/assets/20594f69efe71b4ec28c7c41e113ef75.webp" alt="img"></p>
<p>getSpringFactoriesInstances方法被重复使用。</p>
<p><img src="https://pic3.zhimg.com/80/v2-f03ae84183ddc2644f347e493277af6e_720w.webp" alt="img"></p>
<p>总结：如何获取到监听器并进行启动开启监听。</p>
<h3 id="Run方法第二步：构造应用上下文环境"><a href="#Run方法第二步：构造应用上下文环境" class="headerlink" title="Run方法第二步：构造应用上下文环境"></a>Run方法第二步：构造应用上下文环境</h3><p>应用上下文环境包括什么呢？包括计算机的环境，Java环境，Spring的运行环境，Spring项目的配置（在SpringBoot中就是那个熟悉的application.properties&#x2F;yml）等等。</p>
<p><img src="https://pic3.zhimg.com/80/v2-e53f2643f3a0606937cc7baf0ebf8886_720w.webp" alt="img"></p>
<p>通过prepareEnvironment方法创建并按照相应的应用类型配置相应的环境，然后根据用户的配置，配置系统环境，然后启动监听器，并加载系统配置文件。</p>
<p>主要步骤方法：</p>
<p>getOrCreateEnvironment方法</p>
<p>configureEnvironment方法</p>
<p>listeners.environmentPrepared方法</p>
<p><img src="https://pic4.zhimg.com/80/v2-89a1924292b8390a144718807ed97b8f_720w.webp" alt="img"></p>
<p>总结：最终目的就是把环境信息封装到environment对象中，方便后面使用。</p>
<h3 id="Run方法第三步：初始化应用上下文"><a href="#Run方法第三步：初始化应用上下文" class="headerlink" title="Run方法第三步：初始化应用上下文"></a>Run方法第三步：初始化应用上下文</h3><p>通过createApplicationContext方法构建应用上下文对象context，而context中有一个属性beanFactory他是一个DefaultListableBeanFactory类，这就是我们所说的IoC容器。应用上下文对象初始化的同时IOC容器也被创建了。</p>
<p> 通过createApplicationContext方法构建应用上下文对象context，而context中有一个属性beanFactory他是一个DefaultListableBeanFactory类，这就是我们所说的IoC容器。应用上下文对象初始化的同时IOC容器也被创建了。</p>
<p><img src="https://pic4.zhimg.com/80/v2-dc58004a87011062fb8cb341c354b9df_720w.webp" alt="img"></p>
<p>在SpringBoot工程中，应用类型分为三种</p>
<p><img src="https://pic4.zhimg.com/80/v2-757bf1e06eb243c698991599314efbb3_720w.webp" alt="img"></p>
<p>通过反射拿到配置类的字节码对象并通过BeanUtils.instantiateClass方法进行实例化并返回。</p>
<p><img src="https://pic3.zhimg.com/80/v2-b0231e81c593502a788c0fa7ec71ce0e_720w.webp" alt="img"></p>
<p>总结：就是创建应用上下文对象同时创建了IOC容器。</p>
<h3 id="Run方法第四步：刷新应用上下文前的准备阶段"><a href="#Run方法第四步：刷新应用上下文前的准备阶段" class="headerlink" title="Run方法第四步：刷新应用上下文前的准备阶段"></a>Run方法第四步：刷新应用上下文前的准备阶段</h3><p>主要的目的就是为前面的上下文对象context进行一些属性值的设置，在执行过程中还要完成一些Bean对象的创建，其中就包含核心启动类的创建。</p>
<p><img src="https://pic4.zhimg.com/80/v2-7f6d3c5722c9674e3250045553f92423_720w.webp" alt="img"></p>
<p>属性设置</p>
<p><img src="https://pic4.zhimg.com/80/v2-f58152cb940e9f6975db26a80874c30f_720w.webp" alt="img"></p>
<p>Bean对象创建</p>
<p><img src="https://pic2.zhimg.com/80/v2-542814d1a89f8ab7f6d966be93f19a59_720w.webp" alt="img"></p>
<p>Spring容器在启动的时候，会将类解析成Spring内部的beanDefintion结构，并将beanDefintion存储到DefaultListableBeanFactory的Map中。BeanDefinitionLoader方法就是完成赋值。</p>
<p><img src="https://pic3.zhimg.com/80/v2-b907de96388ba5d329b230dbf3e318a6_720w.webp" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-ab266871b53a12740877843c927b8a2e_720w.webp" alt="img"></p>
<p>总结：就是应用上下文属性的设置并把核心启动类生成实例化对象存储到容器中。</p>
<h3 id="Run方法第五步：刷新应用上下文"><a href="#Run方法第五步：刷新应用上下文" class="headerlink" title="Run方法第五步：刷新应用上下文"></a>Run方法第五步：刷新应用上下文</h3><p>Spring Boot的自动配置原理：通常来说主要就是依赖核心启动类上面的@SpringBootApplication注解，这个注解是一个组合注解，他组合了@EnableAutoConfiguration这个注解，在run方法启动会执行getImport方法，最终找到process方法，进行注解的扫描，通过注解组合关系，在底层借助@Import注解向容器导入AutoConfigurationImportSelector.class组件类，这个类在执行过程中他会去加载WEB-INF下名称为spring.factories的文件，从这个文件中根据EnableAutoConfiguration这个key来加载pom.xml引入的所有对应自动配置工厂类的全部路径配置，在经过过滤，选出真正生效的自动配置工厂类去生成实例存到容器中，从而完成自动装配。如果从Main方法的Run方法出发，了解实际实现的原理，就能知道他是怎么通过Main方法找到主类，然后再扫描主类注解，完成一系列操作。而在刷新应用上下文这步就是根据找到的主类来执行解析注解，完成自动装配的一系列过程。</p>
<p>通过refreshContext()方法一路跟下去，最终来到AbstractApplicationContext类的refresh()方法，其中最重要的方法就是invokeBeanFactoryPostProcessors方法，他就是在上下文中完成Bean的注册。</p>
<p><img src="https://pic3.zhimg.com/80/v2-63c4fa85ff2494daf3bbce66ba53b18e_720w.webp" alt="img"></p>
<p><strong>运行步骤：</strong></p>
<p>1.prepareRefresh()刷新上下文</p>
<p>2.obtainFreshBeanFactory()在第三步初始化应用上下文中我们创建了应用的上下文，并触发了GenericApplicationContext类的构造方法如下所示，创建了beanFactory，也就是创建了DefaultListableBeanFactory类，这里就是拿到之前创建的beanFactory。</p>
<p>3.prepareBeanFactory()对上面获取的beanFactory，准备bean工厂，以便在此上下文中使用。</p>
<p>4.postProcessBeanFactory()向上下文中添加了一系列的Bean的后置处理器。</p>
<p>接着就进入到我们最重要的invokeBeanFactoryPostProcessors()方法，完成了IoC容器初始化过程的三个步骤：</p>
<p>1） 第一步：Resource定位</p>
<p><img src="/posts/55072/assets/6eb4e5e181da8da4217945cee440705b.webp" alt="img"></p>
<p>2） 第二步：BeanDefinition的载入</p>
<p><img src="https://pic3.zhimg.com/80/v2-ec058905218e8316dda9999fa534af6a_720w.webp" alt="img"></p>
<p>3） 第三个过程：注册BeanDefinition</p>
<p><img src="https://pic1.zhimg.com/80/v2-7a2302437a9a09e4bfddeec9904eed30_720w.webp" alt="img"></p>
<p>总结：spring启动过程中，就是通过各种扫描，获取到对应的类，然后将类解析成spring内部的BeanDefition结构，存到容器中(注入到ConCurrentHashMap中)，也就是最后的beanDefinitionMap中。</p>
<p><strong>第一步分析：</strong></p>
<p>主要方法，从invokeBeanFactoryPostProcessors方法一直往下跟，直到ConfigurationClassPostProcessor类的parse方法，会发现他把核心启动类传入了这个方法中。</p>
<p><img src="https://pic1.zhimg.com/80/v2-6dac40a4c057c30652ebee8dd78e98d0_720w.webp" alt="img"></p>
<p>在这个方法内部，他判断这个类上知否存在注解，如果存在继续进入下一个方法，直到真正做事的doProcessConfigurationClass方法，在这个方法类，他就开始处理@ComponentScan注解，获取到componentScans对象，然后调用this.componentScanParser.parse方法对他进行解析。</p>
<p><img src="https://pic3.zhimg.com/80/v2-110be9e066c85757b0b8f4988db4e772_720w.webp" alt="img"></p>
<p>在方法内部根据basePackages获取对应类全限定集合，如果集合为空，就把当前的核心启动类全限定名的包名即com.lg加入，设置为basePackages(扫描的包范围)，这里就完成了第一步，获取扫描路径。</p>
<p><img src="https://pic2.zhimg.com/80/v2-221356e1a3b48e21e5b7796c4734f1e1_720w.webp" alt="img"></p>
<p><strong>第二步分析</strong></p>
<p>接着再跳到doScan方法，开始把他转成BeanDefition并注入IOC容器。</p>
<p><img src="https://pic4.zhimg.com/80/v2-886203bc7497163c3b430965d3dcf78f_720w.webp" alt="img"></p>
<p>在doScan方法中第一个关键点findCandidateComponents方法，根据传入的初始路径地址扫描该包及其子包所有的class，并封装成BeanDefinition并存入一个Set集合中，完成第二步。</p>
<p><img src="https://pic1.zhimg.com/80/v2-2913ef8d3f9de278faff8a33ad02bfd4_720w.webp" alt="img"></p>
<p><strong>第三步分析</strong></p>
<p>有了BeanDefinition集合之后，对他进行遍历，在遍历的最后调用了一个registerBeanDefinition方法进行注册BeanDefinition。</p>
<p><img src="https://pic2.zhimg.com/80/v2-efdeaf3907d34324c98e3bcf04a52401_720w.webp" alt="img"></p>
<p>在方法内部，执行到他的实现类DefaultListableBeanFactory中的registerBeanDefinition方法，就直接通过put方式把BeanDefinition注册进了beanDefinitionMap中。</p>
<p><img src="https://pic4.zhimg.com/80/v2-aa0336560f0e349e5966b2514c8f8853_720w.webp" alt="img"></p>
<p><strong>@Import注解指定类解析</strong></p>
<p>解析完主类扫描包之后，接着又开始解析@import注解指定类。</p>
<p><img src="https://pic1.zhimg.com/80/v2-78b8e1008e1bb87088de9e9cce56aae8_720w.webp" alt="img"></p>
<p>首先参数里面有一个getImports方法，他作用就是根据@import注解来获取到要导入到容器中的组件类。他从核心启动类中找到对应的@Import注解。在内部最终要的collectImports方法中，进行递归调用一直找到有@import注解的全类名，最后返回所有有@Import注解的组件类。</p>
<p><img src="https://pic1.zhimg.com/80/v2-d10a7b4bb6fa282af8cc5228edbba92c_720w.webp" alt="img"></p>
<p>获取到注解组件类之后，就需要去执行组件类了，回到ConfigurationClassParser类的parse方法，执行this.deferredImportSelectorHandler.process方法。</p>
<p><img src="https://pic1.zhimg.com/80/v2-91a2a844807619655cf374d1bc51cf7c_720w.webp" alt="img"></p>
<p>接着往下走最后到processGroupImports方法内，里面有非常重要的一步grouping.getImports()。</p>
<p><img src="/posts/55072/assets/c1438474d1b655dccc5631d3499d19e4.webp" alt="img"></p>
<p>先通过grouping.getImports()方法里面调用了process方法，加载spring.factories文件配置所有类，一步步过滤，最后封装成AutoConfigurationEntry对象返回，把这些对象放入Map&lt;String, AnnotationMetadata&gt; entries集合中。</p>
<p><img src="https://pic1.zhimg.com/80/v2-791dcbe38404ce499c7fe9827f7e1ba0_720w.webp" alt="img"></p>
<p><img src="https://pic3.zhimg.com/80/v2-bf315b92ded859ce1dfa007eaec2cdf6_720w.webp" alt="img"></p>
<p>最后通过this.group.selectImports()方法再进行过滤排序，返回要生效的自动装配对象全路径集合，最后通过this.reader.loadBeanDefinitions(configClasses)方法使这些自动装配类全部生效。</p>
<h3 id="Run方法第六步：刷新应用上下文后的扩展接口"><a href="#Run方法第六步：刷新应用上下文后的扩展接口" class="headerlink" title="Run方法第六步：刷新应用上下文后的扩展接口"></a>Run方法第六步：刷新应用上下文后的扩展接口</h3><p>afterRefresh方法，他其实就是一个扩展接口，设计模式中的模板方法，默认为空实现。如果有自定义需求，可以重写该方法。比如打印一些启动结束log，或者一些其它后置处理。</p>
<p><img src="https://pic1.zhimg.com/80/v2-f3521450557074b44d319a72a2e8b6f0_720w.webp" alt="img"></p>

       <div>
            
<div style="text-align:center;color: #ccc;font-size:14px;">
 ------ 本文结束感谢您的阅读 ------
</div> 

       </div>
       <div>
           <div class="reward-container">
  <div>请我一杯咖啡吧！</div>
  <button>
    赞赏
  </button>
  <div class="post-reward">
      <div>
        <img src="/images/wechatpay.jpg" alt="itingyu 微信打赏">
        <span>微信打赏</span>
      </div>

  </div>
</div>

       <div/>
    </div>

    
    
    
    <footer class="post-footer">
          <div class="followme">
  <span>欢迎关注我的其它发布渠道</span>

  <div class="social-list">

      <div class="social-item">
          <span class="social-link">
            <span class="icon">
              <i class="fab fa-weixin"></i>
            </span>

            <span class="label">WeChat</span>
          </span>

          <img class="social-item-img" src="/images/wechatpay.jpg">
      </div>

      <div class="social-item">
          <a target="_blank" class="social-link" href="/atom.xml">
            <span class="icon">
              <i class="fa fa-rss"></i>
            </span>

            <span class="label">RSS</span>
          </a>
      </div>
  </div>
</div>

          <div class="post-tags">
              <a href="/tags/%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86/" rel="tag"><i class="fa fa-tag"></i> 基础知识</a>
              <a href="/tags/springboot/" rel="tag"><i class="fa fa-tag"></i> springboot</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
            </div>
            <div class="post-nav-item">
                <a href="/posts/20659/" rel="next" title="热部署原理">
                  热部署原理 <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>






    <div class="comments gitalk-container"></div>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">


<div class="copyright">
  &copy; 
  <span itemprop="copyrightYear">2023</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">itingyu</span>
</div>

    </div>
  </footer>

  
  <div class="back-to-top" role="button" aria-label="返回顶部">
    <i class="fa fa-arrow-up fa-lg"></i>
    <span>0%</span>
  </div>
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


  
  <script size="300" alpha="0.6" zIndex="-1" src="https://cdnjs.cloudflare.com/ajax/libs/ribbon.js/1.0.2/ribbon.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/animejs/3.2.1/anime.min.js" integrity="sha256-XL2inqUJaslATFnHdJOi9GfQ60on8Wx1C2H8DYiN1xY=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.0/jquery.min.js" integrity="sha256-2Pmvv0kuTBOenSvLm6bvfBSSHrUJ+3A7x6P5Ebd07/g=" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/fancybox/3.5.7/jquery.fancybox.min.js" integrity="sha256-yt2kYMy0w8AbtF89WXb2P1rfjcP/HTHLT7097U8Y5b8=" crossorigin="anonymous"></script>
<script src="/js/comments.js"></script><script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/hexo-generator-searchdb/1.4.1/search.js" integrity="sha256-1kfA5uHPf65M5cphT2dvymhkuyHPQp5A53EGZOnOLmc=" crossorigin="anonymous"></script>
<script src="/js/third-party/search/local-search.js"></script>




  <script src="/js/third-party/fancybox.js"></script>

  <script src="/js/third-party/pace.js"></script>


  




<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.css" integrity="sha256-AJnUHL7dBv6PGaeyPQJcgQPDjt/Hn/PvYZde1iqfp8U=" crossorigin="anonymous">

<script class="next-config" data-name="gitalk" type="application/json">{"enable":true,"github_id":"itingyu","repo":"itingyu.github.io","client_id":"dfcd313fd692381d6bda","client_secret":"8c36e87fcf362001e3ac75ccbc34898bc8b21ac6","admin_user":"itingyu","distraction_free_mode":true,"proxy":"https://cors-anywhere.azm.workers.dev/https://github.com/login/oauth/access_token","language":"en | es-ES | fr | ru | zh-CN | zh-TW","js":{"url":"https://cdnjs.cloudflare.com/ajax/libs/gitalk/1.8.0/gitalk.min.js","integrity":"sha256-MVK9MGD/XJaGyIghSVrONSnoXoGh3IFxLw0zfvzpxR4="},"path_md5":"d46692955197282df3168d12709d28c9"}</script>
<script src="/js/third-party/comments/gitalk.js"></script>

</body>

</html>
